
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Calculate Mean, Median, Mode and create Visualization using built in function &#8212; Lugisz Portfolio</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css?v=6644e6bb" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'Project01';</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.7/require.min.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Lecture 16 Example" href="lecture_16_example.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
  
    <p class="title logo__title">Lugisz Portfolio</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="index.html">
                    Lugisz Portfolio
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="lecture_16_example.html">Lecture 16 Example</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Calculate Mean, Median, Mode &amp; create Visualization using built in function</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/Project01.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Calculate Mean, Median, Mode and create Visualization using built in function</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#importing-data-using-pandas">Importing Data using pandas</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#chunking-the-data-from-2020-2025">Chunking the data from 2020 - 2025</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#statistics-using-pandas">Statistics using pandas</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#calculating-the-statistics-in-a-hard-way">Calculating the statistics in a hard way</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#simple-visualization">Simple Visualization</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="calculate-mean-median-mode-and-create-visualization-using-built-in-function">
<h1>Calculate Mean, Median, Mode and create Visualization using built in function<a class="headerlink" href="#calculate-mean-median-mode-and-create-visualization-using-built-in-function" title="Link to this heading">#</a></h1>
<p> In this project, I use data from the NYC Marathon to calculate basic statistics from the runners' ages. Initially, I used Panda for the sake of convenience. Later on, I will only use the built-in libraries to calculate it. In addition, I also created a simple visualization using built-in libraries. The intention of this project is to show the power of pandas. It simplifies the complex task into just a line of code. </p><section id="importing-data-using-pandas">
<h2>Importing Data using pandas<a class="headerlink" href="#importing-data-using-pandas" title="Link to this heading">#</a></h2>
<p> We need this as comparison with the result from calculating it "the hard way" below. </p><div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;NYC Marathon Results.csv&quot;</span><span class="p">)</span>
<span class="n">df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Year</th>
      <th>Race</th>
      <th>Name</th>
      <th>Gender</th>
      <th>Age</th>
      <th>State</th>
      <th>Country</th>
      <th>Overall</th>
      <th>Finish Time</th>
      <th>Finish</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2024</td>
      <td>NYC Marathon</td>
      <td>Abdi Nageeye</td>
      <td>M</td>
      <td>35</td>
      <td>NaN</td>
      <td>NLD</td>
      <td>1</td>
      <td>02:07:39</td>
      <td>7659</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2024</td>
      <td>NYC Marathon</td>
      <td>Evans Chebet</td>
      <td>M</td>
      <td>35</td>
      <td>-0</td>
      <td>KEN</td>
      <td>2</td>
      <td>02:07:45</td>
      <td>7665</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2024</td>
      <td>NYC Marathon</td>
      <td>Albert Korir</td>
      <td>M</td>
      <td>30</td>
      <td>NaN</td>
      <td>KEN</td>
      <td>3</td>
      <td>02:08:00</td>
      <td>7680</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2024</td>
      <td>NYC Marathon</td>
      <td>Tamirat Tola</td>
      <td>M</td>
      <td>33</td>
      <td>NaN</td>
      <td>ETH</td>
      <td>4</td>
      <td>02:08:12</td>
      <td>7692</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2024</td>
      <td>NYC Marathon</td>
      <td>Geoffrey Kamworor</td>
      <td>M</td>
      <td>31</td>
      <td>-0</td>
      <td>KEN</td>
      <td>5</td>
      <td>02:08:50</td>
      <td>7730</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>1460281</th>
      <td>1979</td>
      <td>NYC Marathon</td>
      <td>Alan Skriloff</td>
      <td>M</td>
      <td>31</td>
      <td>NJ</td>
      <td>USA</td>
      <td>10473</td>
      <td>7:11:30</td>
      <td>25890</td>
    </tr>
    <tr>
      <th>1460282</th>
      <td>1979</td>
      <td>NYC Marathon</td>
      <td>Richard Traum</td>
      <td>M</td>
      <td>38</td>
      <td>NY</td>
      <td>USA</td>
      <td>10474</td>
      <td>7:21:31</td>
      <td>26491</td>
    </tr>
    <tr>
      <th>1460283</th>
      <td>1979</td>
      <td>NYC Marathon</td>
      <td>Melissa Morrow</td>
      <td>W</td>
      <td>27</td>
      <td>AZ</td>
      <td>USA</td>
      <td>10475</td>
      <td>7:21:45</td>
      <td>26505</td>
    </tr>
    <tr>
      <th>1460284</th>
      <td>1979</td>
      <td>NYC Marathon</td>
      <td>Linda Galbraith</td>
      <td>W</td>
      <td>32</td>
      <td>NY</td>
      <td>USA</td>
      <td>10476</td>
      <td>7:22:00</td>
      <td>26520</td>
    </tr>
    <tr>
      <th>1460285</th>
      <td>1979</td>
      <td>NYC Marathon</td>
      <td>Jane O'Connor</td>
      <td>W</td>
      <td>49</td>
      <td>NY</td>
      <td>USA</td>
      <td>10477</td>
      <td>7:22:00</td>
      <td>26520</td>
    </tr>
  </tbody>
</table>
<p>1460286 rows × 10 columns</p>
</div></div></div>
</div>
</section>
<section id="chunking-the-data-from-2020-2025">
<h2>Chunking the data from 2020 - 2025<a class="headerlink" href="#chunking-the-data-from-2020-2025" title="Link to this heading">#</a></h2>
<p>Because the data is too large, with 1,460,286 rows, we need to slice/chunk it into smaller datasets. We need this for a better comparison with the hard way calculation below. The hard way calculation cannot handle these massive rows, especially for the Mode calculation, because to compute the mode, the machine needs to store all the numbers and append them to get the most frequent one. It's impossible to do that manually 1.4 million times.</p><div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">nyc_marathon</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;Year&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">between</span><span class="p">(</span><span class="mi">2020</span><span class="p">,</span> <span class="mi">2025</span><span class="p">)]</span>
<span class="n">nyc_marathon</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Year</th>
      <th>Race</th>
      <th>Name</th>
      <th>Gender</th>
      <th>Age</th>
      <th>State</th>
      <th>Country</th>
      <th>Overall</th>
      <th>Finish Time</th>
      <th>Finish</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2024</td>
      <td>NYC Marathon</td>
      <td>Abdi Nageeye</td>
      <td>M</td>
      <td>35</td>
      <td>NaN</td>
      <td>NLD</td>
      <td>1</td>
      <td>02:07:39</td>
      <td>7659</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2024</td>
      <td>NYC Marathon</td>
      <td>Evans Chebet</td>
      <td>M</td>
      <td>35</td>
      <td>-0</td>
      <td>KEN</td>
      <td>2</td>
      <td>02:07:45</td>
      <td>7665</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2024</td>
      <td>NYC Marathon</td>
      <td>Albert Korir</td>
      <td>M</td>
      <td>30</td>
      <td>NaN</td>
      <td>KEN</td>
      <td>3</td>
      <td>02:08:00</td>
      <td>7680</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2024</td>
      <td>NYC Marathon</td>
      <td>Tamirat Tola</td>
      <td>M</td>
      <td>33</td>
      <td>NaN</td>
      <td>ETH</td>
      <td>4</td>
      <td>02:08:12</td>
      <td>7692</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2024</td>
      <td>NYC Marathon</td>
      <td>Geoffrey Kamworor</td>
      <td>M</td>
      <td>31</td>
      <td>-0</td>
      <td>KEN</td>
      <td>5</td>
      <td>02:08:50</td>
      <td>7730</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>1280717</th>
      <td>2023</td>
      <td>NYC Marathon</td>
      <td>Rajni Singh</td>
      <td>W</td>
      <td>45</td>
      <td>NJ</td>
      <td>USA</td>
      <td>35594</td>
      <td>5:03:33</td>
      <td>18213</td>
    </tr>
    <tr>
      <th>1280718</th>
      <td>2023</td>
      <td>NYC Marathon</td>
      <td>Bridget Schwartz</td>
      <td>W</td>
      <td>25</td>
      <td>NY</td>
      <td>USA</td>
      <td>35595</td>
      <td>5:03:34</td>
      <td>18214</td>
    </tr>
    <tr>
      <th>1280719</th>
      <td>2023</td>
      <td>NYC Marathon</td>
      <td>Debora Pelosi</td>
      <td>W</td>
      <td>53</td>
      <td>NaN</td>
      <td>ITA</td>
      <td>35596</td>
      <td>5:03:34</td>
      <td>18214</td>
    </tr>
    <tr>
      <th>1280720</th>
      <td>2023</td>
      <td>NYC Marathon</td>
      <td>Briana Goewert</td>
      <td>W</td>
      <td>26</td>
      <td>NY</td>
      <td>USA</td>
      <td>35597</td>
      <td>5:03:34</td>
      <td>18214</td>
    </tr>
    <tr>
      <th>1280721</th>
      <td>2023</td>
      <td>NYC Marathon</td>
      <td>Craig Nassi</td>
      <td>M</td>
      <td>54</td>
      <td>NY</td>
      <td>USA</td>
      <td>35598</td>
      <td>5:03:34</td>
      <td>18214</td>
    </tr>
  </tbody>
</table>
<p>179509 rows × 10 columns</p>
</div></div></div>
</div>
</section>
<section id="statistics-using-pandas">
<h2>Statistics using pandas<a class="headerlink" href="#statistics-using-pandas" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mean_age</span> <span class="o">=</span> <span class="n">nyc_marathon</span><span class="p">[</span><span class="s2">&quot;Age&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">median_age</span> <span class="o">=</span> <span class="n">nyc_marathon</span><span class="p">[</span><span class="s2">&quot;Age&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">median</span><span class="p">()</span>
<span class="n">mode_age</span> <span class="o">=</span> <span class="n">nyc_marathon</span><span class="p">[</span><span class="s2">&quot;Age&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">mode</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Overall Age Statistics:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Mean Age: </span><span class="si">{</span><span class="n">mean_age</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2"> years&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Median Age: </span><span class="si">{</span><span class="n">median_age</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> years&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Mode Age: </span><span class="si">{</span><span class="n">mode_age</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> years&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Overall Age Statistics:
Mean Age: 40.7 years
Median Age: 40 years
Mode Age: 30 years
</pre></div>
</div>
</div>
</div>
</section>
<section id="calculating-the-statistics-in-a-hard-way">
<h2>Calculating the statistics in a hard way<a class="headerlink" href="#calculating-the-statistics-in-a-hard-way" title="Link to this heading">#</a></h2>
<p> As I've mentioned before, pandas is a powerful library. We can see below that computing such simple tasks as mean, median, and mode manually requires many lines of code. Whereas using pandas, we only need 1 line for each calculation.</p><div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">csv</span>

<span class="c1"># Since the data is too big, I plan to only calculate the result from 2020 - 2025</span>
<span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;NYC Marathon Results.csv&quot;</span>
<span class="n">target_years</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;2020&quot;</span><span class="p">,</span> <span class="s2">&quot;2021&quot;</span><span class="p">,</span> <span class="s2">&quot;2022&quot;</span><span class="p">,</span> <span class="s2">&quot;2023&quot;</span><span class="p">,</span> <span class="s2">&quot;2024&quot;</span><span class="p">,</span> <span class="s2">&quot;2025&quot;</span><span class="p">}</span>

<span class="n">ages</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">try</span><span class="p">:</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
        <span class="n">reader</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictReader</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">reader</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;Year&quot;</span><span class="p">]</span> <span class="ow">in</span> <span class="n">target_years</span><span class="p">:</span>
                    <span class="n">age</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;Age&quot;</span><span class="p">])</span>
                    <span class="n">ages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">age</span><span class="p">)</span>
            <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">KeyError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>
                <span class="k">continue</span>

<span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: The file &#39;</span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">&#39; was not found.&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Please make sure the file is in the same directory as the script,&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;or provide the full file path.&quot;</span><span class="p">)</span>
    <span class="n">exit</span><span class="p">()</span>

<span class="c1"># Make the year appear in sequence</span>
<span class="n">sorted_years_list</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">target_years</span><span class="p">))</span>
<span class="n">years_str</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sorted_years_list</span><span class="p">)</span>

<span class="c1"># Calculate Statistics The Hard Way</span>
<span class="c1"># Check if we actually found any data</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">ages</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No valid age data found for the years </span><span class="si">{</span><span class="n">target_years</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calculating statistics for </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">ages</span><span class="p">)</span><span class="si">:</span><span class="s2">,</span><span class="si">}</span><span class="s2"> runners from </span><span class="si">{</span><span class="n">years_str</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Mean Calculation</span>
    <span class="n">total_sum</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">age</span> <span class="ow">in</span> <span class="n">ages</span><span class="p">:</span>
        <span class="n">total_sum</span> <span class="o">+=</span> <span class="n">age</span>

    <span class="n">count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">ages</span><span class="p">)</span>
    <span class="n">mean_age</span> <span class="o">=</span> <span class="n">total_sum</span> <span class="o">/</span> <span class="n">count</span>

    <span class="c1"># Median Calculation</span>
    <span class="n">sorted_ages</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">ages</span><span class="p">)</span>

    <span class="n">median_age</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="c1"># Check if the count is odd or even</span>
    <span class="k">if</span> <span class="n">count</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>  <span class="c1"># if odd</span>
        <span class="n">median_index</span> <span class="o">=</span> <span class="n">count</span> <span class="o">//</span> <span class="mi">2</span>
        <span class="n">median_age</span> <span class="o">=</span> <span class="n">sorted_ages</span><span class="p">[</span><span class="n">median_index</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>  <span class="c1"># if even</span>
        <span class="n">index2</span> <span class="o">=</span> <span class="n">count</span> <span class="o">//</span> <span class="mi">2</span>
        <span class="n">index1</span> <span class="o">=</span> <span class="n">index2</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="n">median_age</span> <span class="o">=</span> <span class="p">(</span><span class="n">sorted_ages</span><span class="p">[</span><span class="n">index1</span><span class="p">]</span> <span class="o">+</span> <span class="n">sorted_ages</span><span class="p">[</span><span class="n">index2</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span>

    <span class="c1"># Mode Calculation (uses dictionary)</span>
    <span class="n">age_counts</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">age</span> <span class="ow">in</span> <span class="n">ages</span><span class="p">:</span>
        <span class="n">age_counts</span><span class="p">[</span><span class="n">age</span><span class="p">]</span> <span class="o">=</span> <span class="n">age_counts</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">age</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>

    <span class="c1"># Find the age with the highest count in the dictionary</span>
    <span class="n">max_count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">mode_age</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>  <span class="c1"># Start with a placeholder</span>

    <span class="c1"># Loop through both the key (age) and value (count) using items</span>
    <span class="k">for</span> <span class="n">age</span><span class="p">,</span> <span class="n">count</span> <span class="ow">in</span> <span class="n">age_counts</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">count</span> <span class="o">&gt;</span> <span class="n">max_count</span><span class="p">:</span>
            <span class="n">max_count</span> <span class="o">=</span> <span class="n">count</span>
            <span class="n">mode_age</span> <span class="o">=</span> <span class="n">age</span>

    <span class="c1"># Print the Results</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Overall Age Statistics&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Mean Age: </span><span class="si">{</span><span class="n">mean_age</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2"> years&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Median Age: </span><span class="si">{</span><span class="n">median_age</span><span class="si">}</span><span class="s2"> years&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Mode Age: </span><span class="si">{</span><span class="n">mode_age</span><span class="si">}</span><span class="s2"> years (appeared </span><span class="si">{</span><span class="n">max_count</span><span class="si">}</span><span class="s2"> times)&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Calculating statistics for 179,509 runners from 2020, 2021, 2022, 2023, 2024, 2025

Overall Age Statistics
Mean Age: 40.7 years
Median Age: 40 years
Mode Age: 30 years (appeared 6044 times)
</pre></div>
</div>
</div>
</div>
<p>Note: <br> Look at the number of rows in the pandas dataframe from 2020 to 2025 and the number of runners in the hard way calculation; they give the exact same number. Therefore, we can assume that both are correct (using the same data for the respective calculation)</p></section>
<section id="simple-visualization">
<h2>Simple Visualization<a class="headerlink" href="#simple-visualization" title="Link to this heading">#</a></h2>
<p> This is also evidence of the power of a Python Library called plotly. Without it, visualizing something is quite challenging. Therefore, here I can just visualize the Mean, Median, and Mode using a simple method of printing ❤️ times the age number. Choosing heart to illustrate age is inspired by a game. </p><div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># # Round the calculated ages to the nearest whole number</span>
<span class="n">rounded_mean</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">mean_age</span><span class="p">)</span>
<span class="n">rounded_median</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">median_age</span><span class="p">)</span>
<span class="n">rounded_mode</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">mode_age</span><span class="p">)</span>
<span class="c1"># Mode is already an int, but just to be safe I use round()</span>


<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Age Statistics Sparklines:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Each ❤️ represents 1 year&quot;</span><span class="p">)</span>

<span class="c1"># Create sparklines for each statistic</span>
<span class="n">mean_bar</span> <span class="o">=</span> <span class="s2">&quot;❤️&quot;</span> <span class="o">*</span> <span class="n">rounded_mean</span>
<span class="n">median_bar</span> <span class="o">=</span> <span class="s2">&quot;❤️&quot;</span> <span class="o">*</span> <span class="n">rounded_median</span>
<span class="n">mode_bar</span> <span class="o">=</span> <span class="s2">&quot;❤️&quot;</span> <span class="o">*</span> <span class="n">rounded_mode</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39;Mean&#39;</span><span class="si">:</span><span class="s2">&lt;6</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">mean_bar</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">rounded_mean</span><span class="si">}</span><span class="s2"> years)&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39;Median&#39;</span><span class="si">:</span><span class="s2">&lt;6</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">median_bar</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">rounded_median</span><span class="si">}</span><span class="s2"> years)&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39;Mode&#39;</span><span class="si">:</span><span class="s2">&lt;6</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">mode_bar</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">rounded_mode</span><span class="si">}</span><span class="s2"> years)&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Age Statistics Sparklines:
Each ❤️ represents 1 year
Mean   ❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️ (41 years)
Median ❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️ (40 years)
Mode   ❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️❤️ (30 years)
</pre></div>
</div>
</div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="lecture_16_example.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Lecture 16 Example</p>
      </div>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#importing-data-using-pandas">Importing Data using pandas</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#chunking-the-data-from-2020-2025">Chunking the data from 2020 - 2025</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#statistics-using-pandas">Statistics using pandas</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#calculating-the-statistics-in-a-hard-way">Calculating the statistics in a hard way</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#simple-visualization">Simple Visualization</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Lugis Andrianto
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>